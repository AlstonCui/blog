# 版本
## http/1.0
http1.0不会复用tcp链接，每次请求都会打开、断开一条链接。    
如果您看过我前阵子整理的[关于TCP的博文](TCP.md)，您就会知道，TCP是有**延迟响应机制**的，每次请求并不会马上返回。这算是http1.0性能不好的一个原因吧。

![tcp握手](/images/tcp_open.jpg)

## http/1.1
http/1.1当前普及程度最高的http版本。        
到了http/1.1版本，tcp链接可以持久保持了（也就说，一段时间内，一个tcp链接会等到同一个域名下的所有资源加载完后再断开。）
![tcp1.1](2019-04-28-13-42-58.png)     
在保持tcp链接的基础上，引入了**http管道**的机制，差点实现了**多路复用**。   
### http/1.1 without pipelining(不使用管道)    
通过一条tcp链接请求资源，只有在上一个请求完成后，才能发出下一个请求。也就是上图描述的情形。

### http/1.1 with pipelining(使用管道)     
客户端不会等待响应，直接并发N个请求。但是，http/1.x有严格的**串行返回响应机制**。通俗的讲就是：**请求时，不用等上一个完成；但响应时，必须严格按照顺序返回**。      
通过开发者工具，你就可以观察到这一点。       
![http/1.1管道](2019-04-28-13-56-35.png)
基于以上描述，使用“ HTTP 管道”技术时，万一第一个响应时间很长，那么后面的响应处理完了也无法发送，只能被缓存起来，占用服务器内存，这就是传说中的“**队首阻塞（head of line blocking）**”。     
这也是http/1.x下，多数网络体验不好的原因。




# 报文结构






# 参考文献
* [[1] 前端开发与 HTTP/2 的羁绊——安利篇](https://aotu.io/notes/2016/03/17/http2-char/)
* [[2] 假如HTTP/2已经普及](https://aotu.io/notes/2016/06/14/http2/)
* [[3] HTTP相关——http1.0 1.1 1.2、https、加密算法](https://blog.csdn.net/xmzyjr123/article/details/86744092)
* [[4] http2.0 --速度与激情](https://www.liangzl.com/get-article-detail-594.html)
